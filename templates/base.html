<!doctype html>
<html lang="{{ 'zh-CN' if lang=='zh' else 'en' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{% block title %}{{ "窗花手工艺小店" if lang=="zh" else "Chuanghua Craft Shop" }}{% endblock %}</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Your theme -->
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body class="paper-bg">

<nav class="navbar navbar-expand-lg navbar-dark paper-nav">
  <div class="container">
    <a class="navbar-brand fw-semibold" href="{{ url_for('index', lang=lang) }}">
      {{ "窗花手工艺小店" if lang=="zh" else "Chuanghua Craft Shop" }}
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
      <span class="navbar-toggler_toggle-icon"></span>
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('index', lang=lang) }}">{{ "作品" if lang=="zh" else "Catalog" }}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#message">{{ "留言" if lang=="zh" else "Message" }}</a>
        </li>
      </ul>

      <div class="d-flex gap-2 align-items-center">
        <!-- Language switch -->
        <a class="btn btn-sm btn-outline-light" href="{{ switch_lang_url('zh') }}">中文</a>
        <a class="btn btn-sm btn-outline-light" href="{{ switch_lang_url('en') }}">EN</a>

        <a class="btn btn-sm btn-light" href="{{ url_for('cart', lang=lang) }}">
          {{ "购物车" if lang=="zh" else "Cart" }}
          <span class="badge text-bg-danger ms-1">{{ cart_count or 0 }}</span>
        </a>

        {% if request.args.get('k') %}
          <a class="btn btn-sm btn-outline-warning"
             href="{{ url_for('admin', lang=lang, k=request.args.get('k')) }}">
            {{ "后台" if lang=="zh" else "Admin" }}
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>

<header class="paper-hero py-4">
  <div class="container">
    <div class="row g-4 align-items-center">
      <div class="col-lg-7">
        <div class="paper-badge mb-2">
          {{ "手工艺人专用独立站演示" if lang=="zh" else "Demo: website for craft sellers" }}
        </div>
        <h1 class="display-6 fw-bold mb-2">
          {% if lang=="zh" %}
            手工艺人专用独立站：窗花/饰品/手作，一周上线，可直接接单。
          {% else %}
            A craft seller website: paper-cut / handmade. Launch in 7 days and start taking orders.
          {% endif %}
        </h1>
        <p class="text-secondary mb-0">
          {% if lang=="zh" %}
            展示作品 → 自动收集订单与留言；后台改价/上新/下架；支持中英双语，面向海外客户。
          {% else %}
            Showcase → collect orders/messages; manage products in admin; bilingual CN/EN for overseas buyers.
          {% endif %}
        </p>
      </div>
      <div class="col-lg-5">
        <div class="paper-card p-3">
          <div class="fw-semibold mb-1">{{ "下单流程" if lang=="zh" else "Order flow" }}</div>
          <ol class="small mb-0">
            <li>{{ "浏览作品并加入购物车" if lang=="zh" else "Browse and add to cart" }}</li>
            <li>{{ "填写联系方式与地址" if lang=="zh" else "Enter contact + address" }}</li>
            <li>{{ "提交订单并等待确认" if lang=="zh" else "Submit order and wait for confirmation" }}</li>
          </ol>
          <div class="small text-secondary mt-2">
            {{ "（演示站：不接真实付款）" if lang=="zh" else "(Demo site: no real payment processing)" }}
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="py-4">
  <div class="container">

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-3">
          {% for category, msg in messages %}
            <div class="alert alert-{{ category }} mb-2">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>
</main>

<footer class="py-4 border-top bg-white">
  <div class="container small text-secondary d-flex flex-wrap gap-2 justify-content-between">
    <div>
      {{ "窗花手工艺小店（演示站）" if lang=="zh" else "Chuanghua Craft Shop (Demo)" }}
    </div>
    <div>
      <a class="text-secondary" href="{{ url_for('index', lang=lang) }}">{{ "返回首页" if lang=="zh" else "Home" }}</a>
    </div>
  </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
